te voy a dar algo de codigo, no agas nada de momento:
login.component.html y ts
<div class="bg-main-app">
    <div class="container d-flex justify-content-center align-items-center vh-100">

      <form (ngSubmit)="onLogin()">

        <div class="form-group">
          <label for="correo">Correo:</label>
          <input
            type="email"
            class="form-control"
            id="correo"
            [(ngModel)]="correo"
            name="correo"
            placeholder="alumno.17@tecsanpedro.edu.mx"
            required
          />
        </div>

        <div class="form-group">
          <label for="contrasena">ContraseÃ±a:</label>
          <input
            type="password"
            class="form-control"
            id="contrasena"
            [(ngModel)]="contrasena"
            name="contrasena"
            placeholder="contraseÃ±a"
            required
          />
        </div>

        <div class="form-group">
          <label for="rol">Tipo de usuario:</label>
          <select
            class="form-control"
            id="rol"
            name="rol"
            required
          >
            <option value="Alumno" selected>Alumno</option>
            <option value="Departamento">Departamento</option>
            <option value="Admin">Admin</option>
          </select>
        </div>

        <div class="m-0">
          <button class="btn btn-success btn-block m-2" type="submit">Iniciar SesiÃ³n</button>
          <button class="btn btn-success btn-block m-2" type="button" (click)="goToRegister()">Registrarse</button>
        </div>

        <div *ngIf="error" style="color: red;">{{ error }}</div>

      </form>


    </div>
</div>

import { Component } from '@angular/core';
import { Router } from '@angular/router';
import { AuthService } from '../../service/auth.service';
import { Alumno } from '../../interfaces/alumno.interface';

@Component({
  selector: 'app-login',
  templateUrl: './login.component.html',
  styleUrls: ['./login.component.css'],
})
export class LoginComponent {
  correo: string = '';
  contrasena: string = '';
  error: string | null = null;

  constructor(private authService: AuthService, private router: Router) {}

  onLogin(): void {
    this.authService.login(this.correo, this.contrasena).subscribe({
      next: (alumno: Alumno) => {
        this.authService.setAlumno(alumno); // ðŸš€ Guardar datos del alumno
        console.log('Inicio de sesiÃ³n exitoso:', alumno);
        // ðŸš€ RedirecciÃ³n a la pÃ¡gina de inicio
        this.router.navigateByUrl('/alumno/home').then(() => {
          console.log('RedirecciÃ³n exitosa a /alumno/home');
        }).catch(err => console.error('Error al redirigir:', err));
      },
      error: (err) => {
        this.error = 'Usuario o ContraseÃ±a incorrecto';
        console.error(err);
      },
    });
  }
  goToRegister(): void {
    this.router.navigate(['/auth/register']);
  }
}
















server.js
const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');
const db = require('./src/app/db/db');
const multer = require('multer');
const path = require('path');


const app = express();
app.use(cors());
app.use(bodyParser.json());

app.post('/api/login', (req, res) => {
  const { correo, contrasena } = req.body;

  const query = `
    SELECT
      a.idalumnos,
      a.nombre_completo,
      a.correo,
      a.telefono,
      a.no_control,
      a.foto,
      a.fecha_registro,
      p.estatus_administracion_y_finanzas,
      p.estatus_centro_de_informacion,
      p.estatus_centro_de_computo,
      p.estatus_recursos_materiales,
      p.estatus_departamento_de_vinculacion,
      p.comentario_administracion_y_finanzas,
      p.comentario_centro_de_informacion,
      p.comentario_centro_de_computo,
      p.comentario_recursos_materiales,
      p.comentario_departamento_de_vinculacion,
      p.estatus_peticion
    FROM
      alumnos a
    LEFT JOIN
      peticiones p ON a.no_control = p.no_control
    WHERE
      a.correo = ? AND a.contrasena = ?
  `;

  db.query(query, [correo, contrasena], (err, results) => {
    if (err) {
      console.error('Error al verificar alumno:', err);
      return res.status(500).json({ error: 'Error en el servidor' });
    }

    if (results.length === 0) {
      return res.status(401).json({ error: 'Credenciales incorrectas' });
    }

    res.status(200).json(results[0]); // ðŸš€ Enviamos los datos del alumno + peticiones
  });
});

const PORT = 3000;
app.listen(PORT, () => {
  console.log(`Servidor corriendo en http://localhost:${PORT}`);
});

// ðŸ“ ConfiguraciÃ³n de multer para subir imÃ¡genes
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, './uploads/'); // Carpeta donde se guardarÃ¡n las imÃ¡genes
  },
  filename: (req, file, cb) => {
    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
    cb(null, uniqueSuffix + path.extname(file.originalname)); // Nombre Ãºnico para evitar colisiones
  }
});

const upload = multer({ storage: storage });

// ðŸŒ Ruta para registrar alumnos
app.post('/api/register', upload.single('foto'), (req, res) => {
  const { nombre_completo, correo, telefono, no_control, contrasena } = req.body;
  const foto = req.file ? req.file.filename : null; // Nombre de la imagen subida

  const query = `
    INSERT INTO alumnos (nombre_completo, correo, telefono, no_control, foto, contrasena, fecha_registro)
    VALUES (?, ?, ?, ?, ?, ?, NOW())
  `;

  db.query(query, [nombre_completo, correo, telefono, no_control, foto, contrasena], (err, result) => {
    if (err) {
      console.error('Error al registrar alumno:', err);
      return res.status(500).json({ error: 'Error en el servidor' });
    }
    res.status(201).json({ message: 'Alumno registrado exitosamente' });
  });
});


no agas nada de momento:





















auth.service.ts

import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable, BehaviorSubject } from 'rxjs';
import { Alumno } from '../interfaces/alumno.interface';
import { map } from 'rxjs/operators';

@Injectable({
  providedIn: 'root',
})
export class AuthService {
  private apiUrl = 'http://localhost:3000/api/login';
  private alumnoSubject = new BehaviorSubject<Alumno | null>(null);

  constructor(private http: HttpClient) {}

  // ðŸš€ MÃ©todo actualizado para iniciar sesiÃ³n y obtener los datos de 'alumnos' + 'peticiones'
  login(correo: string, contrasena: string): Observable<Alumno> {
    return this.http.post<Alumno>(this.apiUrl, { correo, contrasena });
  }

  setAlumno(alumno: Alumno): void {
    this.alumnoSubject.next(alumno);
  }

  isAlumnoAuthenticated(): Observable<boolean> {
    return this.alumnoSubject.asObservable().pipe(map(alumno => !!alumno));
  }

  getAlumno(): Observable<Alumno | null> {
    return this.alumnoSubject.asObservable();
  }

  logout(): void {
    this.alumnoSubject.next(null);
    localStorage.removeItem('alumno');
    sessionStorage.removeItem('alumno');
  }

  // ðŸš€ MÃ©todo para registrar alumnos en la db
}


a base de datos se llama "no_adeudo", esta tiene 4 tablas, administrador, alumnos, peticiones y departamentos:

administrador:
Columns:
idadministrador int AI PK
usuario varchar(45)
contrasena varchar(45)
rol varchar(20)

alumnos:
Columns:
idalumnos int AI PK NN
nombre_completo varchar(100)
correo varchar(45)
telefono varchar(45)
no_control varchar(45) UQ
foto varchar(45)
contrasena varchar(45)
fecha_registro date
rol varchar(20)

departamentos:
Columns:
iddepartamentos int AI PK
nombre_departamento varchar(45)
usuario varchar(45)
contrasena varchar(45)
departamento_id varchar(45)
rol varchar(20)



esta es la otra parte del proyecto: no agas nada de momento





















esta es la estructura del proyecto:
Proyecto/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ administrador/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ administrador.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ administrador.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ administrador.component.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€departamentos
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ administrador.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ administrador.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ administrador.component.css
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€lista-admin
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lista-admin.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lista-admin.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lista-admin.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ admin-routing.module.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.module.ts
â”‚   â”‚   â”œâ”€â”€ alumno/
â”‚   â”‚   â”‚   â”œâ”€â”€ adeudo/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adeudo.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adeudo.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adeudo.component.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ adeudo.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ archivo
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ archivo.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ archivo.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ archivo.component.css
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ info
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lista-admin.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lista-admin.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lista-admin.component.css
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inicio
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inicio-admin.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inicio-admin.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ inicio-admin.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ alumno-routing.module.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ alumno.module.ts
â”‚   â”‚   â”œâ”€â”€ auth/ (en este caso no tengo los componentes dentro de una carpeta components)
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-routing.module.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â”œâ”€â”€ db.js (ConfiguraciÃ³n de la conexiÃ³n a la base de datos 'no_adeudo')
â”‚   â”‚   â”œâ”€â”€ intarfaces/
â”‚   â”‚   â”‚   â”œâ”€â”€ alumno.intarface.ts/
â”‚   â”‚   â”‚   â”œâ”€â”€ alumno.intarface.ts/
â”‚   â”‚   â”‚   â”œâ”€â”€ alumno.intarface.ts/
â”‚   â”‚   â”‚   â”œâ”€â”€ alumno.intarface.ts/
â”‚   â”‚   â”œâ”€â”€ departamentos/
â”‚   â”‚   â”‚   â”œâ”€â”€ verificar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verificar.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verificar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ verificar.component.css
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ info
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ info.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ info.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ info.component.css
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ list
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ list.component.html
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ list.component.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ list.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ departamentos-routing.module.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ departamentos.module.ts
â”‚   â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”‚   â”œâ”€â”€ nav
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ nav.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ nav.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ nav.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.html
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sidebar.component.css
â”‚   â”‚   â”‚   â”œâ”€â”€ shared.module.ts
â”‚   â”‚   â”œâ”€â”€ service
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”œâ”€â”€ app-routing.module.ts
â”‚   â”‚   â”œâ”€â”€ app-component.css
â”‚   â”‚   â”œâ”€â”€ app-component.html
â”‚   â”‚   â”œâ”€â”€ app-component.spect.ts
â”‚   â”‚   â”œâ”€â”€ app-component.ts
â”‚   â”‚   â”œâ”€â”€ app-module.ts

â”œâ”€â”€ server.js
â”œâ”€â”€ package.json
â”œâ”€â”€ uploads/
â”‚   â”œâ”€â”€ (imÃ¡genes subidas aquÃ­)
â”œâ”€â”€ angular.json
â”œâ”€â”€ node_modules/
â”‚   â”œâ”€â”€ (librerÃ­as instaladas)


el login funciona, pero hasta ahora solo pueden iniciar sesion los alumnos, cuando ellos inisian sesion son llevados a un componente en espesifico.
en cuando al server.js, NO MODIFIQUES el query que se trae los datos de alumnos y peticiones, dejalo como esta.

quiero hacer exactamente lo mismo con admin y departamentos, iniciar sesion y que los mande por medio de rutas a un componente en espesifico.
para logear o buscar en las tablas de admin y departamentos usa exactamente la misma estructura del query de alumnos.

si es necesario usa interfaces

ahora, en el html y ts de login.component, el formulario tiene un dropdown, este tiene por defecto al alumno, pero tiene otros 2 valores admin y departamento
dependiendo de que tipo de usuario inicie sesion sera el query y la ruta que se ejecutara, crea algo como un if en server.js y dependiendo del valor de ese dropdown
sera el query que se ejecutara.

ahora cuando un usuario inicie sesion te traeras o consultaras las sig tablas:
Alumno: datos de tabla alumno y peticiones.(aqui oviamente te traeras solo los datos del alumno que inicio sesion)
Departamento: datos de tabla alumno y peticiones(te traeras todos los datos de la tabla alumno junto con los datos de la tabla peticiones, la consulta es casi igual que alumno pero en si te traeras todos los datos)
Admin: datos de tabla alumno, departamentos y peticiones(te traes todos los datos de la tabla alumno, todos los de peticiones y los departamentos)
IMPORTANTE: los datos de la tabla peticiones son de los alumnos el no_control de alumnos es la PK de la tabla peticiones no_control, en si es como si fuera la misma tabla.

las funciones de los archivos que son tipo: setAlumno, loginAlumno, getAlumno, cambialas a ej: setUser, loginUser, getUser, de estaforma no se usaran
funciones etiquetadas con cierto tipo de usuario, esto mas que nada para generalizar los usuarios.
